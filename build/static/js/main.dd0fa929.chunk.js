(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{46:function(e){e.exports={a:"http://app-541c361b-07e8-40bc-86c4-8030281053f4.cleverapps.io/api"}},48:function(e,t,a){e.exports=a(99)},53:function(e,t,a){},95:function(e,t,a){},99:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(28),s=a.n(c),o=(a(53),a(3)),l=a(7),u=a(5),i=a(4),m=a(6),p=a(20),h=a(21),d=a(8),v=a(47),f=a(1),b=a.n(f),g=a(2),E=a(19),O=a.n(E);O.a.defaults.baseURL="https://app-541c361b-07e8-40bc-86c4-8030281053f4.cleverapps.io/api",O.a.interceptors.response.use(function(e){return console.log(e),e},function(e){return e.request.status>=400&&e.request.status<500||(console.log(e.request),h.toast.error("Unexpected error")),Promise.reject(e.request)});var j={get:O.a.get,put:O.a.put,post:O.a.post,delete:O.a.delete,setJwt:function(e){O.a.defaults.headers.common["x-auth-token"]=e}},k="/movies";function y(){return w.apply(this,arguments)}function w(){return(w=Object(g.a)(b.a.mark(function e(){var t,a;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.get(k);case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function S(e){return C.apply(this,arguments)}function C(){return(C=Object(g.a)(b.a.mark(function e(t){var a,n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.get(k+"/"+t);case 2:return a=e.sent,n=a.data,e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function N(e){return x.apply(this,arguments)}function x(){return(x=Object(g.a)(b.a.mark(function e(t){var a,n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.delete(k+"/"+t);case 2:return a=e.sent,n=a.data,e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function I(e){return P.apply(this,arguments)}function P(){return(P=Object(g.a)(b.a.mark(function e(t){var a;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._id){e.next=6;break}return delete(a=Object(d.a)({},t))._id,e.next=5,j.put(k+"/"+t._id,a);case 5:return e.abrupt("return",e.sent);case 6:return e.next=8,j.post(k,t);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}var G="/genres";function A(){return _.apply(this,arguments)}function _(){return(_=Object(g.a)(b.a.mark(function e(){var t,a;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.get(G);case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var M=a(43),q=a.n(M),D="/auth",R="token";function L(){return(L=Object(g.a)(b.a.mark(function e(t,a){var n,r;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.post(D,{email:t,password:a});case 2:n=e.sent,r=n.data,localStorage.setItem(R,r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function F(){localStorage.removeItem(R)}function T(){try{var e=localStorage.getItem(R);return q()(e)}catch(t){return null}}function U(){return localStorage.getItem(R)}j.setJwt(U());var B={login:function(e,t){return L.apply(this,arguments)},logout:F,getCurrentUser:T,loginJwt:function(e){localStorage.setItem(R,e)},getJwt:U,isAdmin:function(){var e=T();return!!e&&!!e.isAdmin}},z=a(9),J=function(e){return r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:null==e.activeItem?"list-group-item active":"list-group-item",onClick:function(){return e.genreSelect(null)}},e.allSelector),e.listItems.map(function(t,a){return r.a.createElement("li",{key:a,className:e.activeItem===t?"list-group-item active":"list-group-item",onClick:function(){return e.genreSelect(t)}},t)}))},H=a(17),K=a.n(H),W=function(e){var t=e.itemsCount,a=e.pageSize,n=e.currentPage,c=e.onPageChange,s=Math.ceil(t/a);if(1===s)return null;var o=K.a.range(1,s+1);return r.a.createElement("nav",null,r.a.createElement("ul",{className:"pagination"},o.map(function(e){return r.a.createElement("li",{key:e,className:e===n?"page-item active":"page-item"},r.a.createElement("a",{href:"# ",onClick:function(){return c(e)},className:"page-link"},e))})))};var $=function(e,t,a){var n=(t-1)*a;return K()(e).slice(n).take(a).value()},Q=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).raiseSort=function(e){var t=Object(d.a)({},a.props.sortCol);t.path===e?t.order="asc"===t.order?"desc":"asc":(t.path=e,t.order="asc"),a.props.onSort(t)},a.renderSortIcon=function(e){var t=a.props.sortCol;return e.path!==t.path?null:"asc"===t.order?r.a.createElement("i",{className:"fa fa-sort-asc"}):r.a.createElement("i",{className:"fa fa-sort-desc"})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("thead",null,r.a.createElement("tr",null,this.props.columns.map(function(t){return r.a.createElement("th",{className:"clickable",key:t.path||t.key,onClick:function(){return e.raiseSort(t.path)}},t.label," ",e.renderSortIcon(t))})))}}]),t}(n.Component),V=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).renderCell=function(e,t){return t.content?t.content(e):K.a.get(e,t.path)},a.createKey=function(e,t){return e._id+(t.path||t.key)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.columns;return r.a.createElement("tbody",null,a.map(function(t){return r.a.createElement("tr",{key:t._id},n.map(function(a){return r.a.createElement("td",{key:e.createKey(t,a)},e.renderCell(t,a))}))}),r.a.createElement("tr",null))}}]),t}(n.Component),X=function(e){var t=e.columns,a=e.sortColumn,n=e.onSort,c=e.data;return r.a.createElement("table",{className:"table"},r.a.createElement(Q,{columns:t,sortCol:a,onSort:n}),r.a.createElement(V,{data:c,columns:t}))},Y=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(u.a)(this,Object(i.a)(t).call(this))).columns=[{path:"title",label:"Title",content:B.isAdmin()?function(e){return r.a.createElement(z.b,{to:"/movies/"+e._id},e.title)}:null},{path:"genre.name",label:"Genre"},{path:"numberInStock",label:"Stock"},{path:"dailyRentalRate",label:"Rate"}],e.deleteColumn={key:"delete",content:function(t){return r.a.createElement("button",{className:"btn btn-danger",onClick:function(){return e.props.onDelete(t._id)}},"Delete")}},B.isAdmin()&&e.columns.push(e.deleteColumn),e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.movies,a=e.sortColumn,n=e.onSort;return r.a.createElement(X,{columns:this.columns,data:t,sortColumn:a,onSort:n})}}]),t}(n.Component),Z=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).state={movies:[],genres:[],pageSize:4,currentPage:1,activeGenre:null,sortColumn:{path:"title",order:"asc"},search:""},a.handleSearch=function(e){var t=e.target.value.toString();t.trim("").length>0&&a.setState({activeGenre:null}),a.setState({search:t.toLowerCase()})},a.handleGenreSelect=function(e){a.setState({activeGenre:e,currentPage:1,search:""})},a.filterMovies=function(e){return null!=a.state.activeGenre?e.filter(function(e){return e.genre.name===a.state.activeGenre}):null!=a.state.search?e.filter(function(e){return e.title.toLowerCase().includes(a.state.search)}):e},a.deleteHandler=function(){var e=Object(g.a)(b.a.mark(function e(t){var n,r;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.state.movies,r=n.filter(function(e){return e._id!==t}),a.setState({movies:r}),e.prev=3,e.next=6,N(t);case 6:e.next=13;break;case 8:e.prev=8,e.t0=e.catch(3),e.t0.response&&e.t0.response.status,h.toast.error("Error."),a.setState({movies:n});case 13:case"end":return e.stop()}},e,null,[[3,8]])}));return function(t){return e.apply(this,arguments)}}(),a.handleLike=function(){var e=Object(g.a)(b.a.mark(function e(t){var n,r;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(v.a)(a.state.movies),r=n.indexOf(t),n[r]=Object(d.a)({},n[r]),n[r].isLiked=!n[r].isLiked,a.setState({movies:n});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handlePageChange=function(e){a.setState({currentPage:e})},a.handleSort=function(e){a.setState({sortColumn:e})},a.getPageData=function(){var e=a.filterMovies(a.state.movies),t=K.a.orderBy(e,[a.state.sortColumn.path],[a.state.sortColumn.order]),n=$(t,a.state.currentPage,a.state.pageSize);return{totalCount:e.length,movies:n}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(b.a.mark(function e(){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,y();case 3:return e.t1=e.sent,e.next=6,A();case 6:e.t2=e.sent,e.t3={movies:e.t1,genres:e.t2},e.t0.setState.call(e.t0,e.t3);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.genres.map(function(e){return e.name}),t=this.getPageData(),a=t.totalCount,n=t.movies;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col col-3"},r.a.createElement(J,{listItems:e,allSelector:"All Genres",activeItem:this.state.activeGenre,genreSelect:this.handleGenreSelect})),r.a.createElement("div",{className:"col col-9"},B.isAdmin()&&r.a.createElement(z.b,{to:"/movies/new",className:"btn btn-primary"},"New Movie"),r.a.createElement("input",{placeholder:"Search...",type:"text",className:"form-control m-2",onChange:this.handleSearch,value:this.state.search}),a>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"There are ",a," movies."),r.a.createElement(Y,{movies:n,sortColumn:this.state.sortColumn,onLike:this.handleLike,onDelete:this.deleteHandler,onSort:this.handleSort})):r.a.createElement("p",null,"There are no movies"),r.a.createElement(W,{itemsCount:a,pageSize:this.state.pageSize,currentPage:this.state.currentPage,onPageChange:this.handlePageChange})))}}]),t}(n.Component),ee=function(e){var t=e.user;return r.a.createElement("nav",{className:"navbar navbar-expand-sm navbar-light bg-light"},r.a.createElement(z.b,{className:"navbar-brand",to:"/"},"Navbar"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup"},r.a.createElement("div",{className:"navbar-nav"},r.a.createElement(z.c,{className:"nav-item nav-link",to:"/movies"},"Movies"),r.a.createElement(z.c,{className:"nav-item nav-link",to:"/customers"},"Customers"),r.a.createElement(z.c,{className:"nav-item nav-link",to:"/rentals"},"Rentals"),!t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(z.c,{className:"nav-item nav-link",to:"/login"},"Login"),r.a.createElement(z.c,{className:"nav-item nav-link",to:"/register"},"Register")),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(z.c,{className:"nav-item nav-link",to:"/profile"},t.name),r.a.createElement(z.c,{className:"nav-item nav-link",to:"/logout"},"Log Out")))))},te=function(e){return r.a.createElement("i",{className:e.isGold?"fa fa-star":"fa fa-star-o","aria-hidden":"true"})},ae=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).columns=[{path:"name",label:"Name"},{path:"isGold",label:"Is Gold",content:function(e){return r.a.createElement(te,{isGold:e.isGold})}},{path:"phone",label:"Phone Number"}],a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.customers,a=e.sortColumn,n=e.onSort;return r.a.createElement(X,{columns:this.columns,data:t,sortColumn:a,onSort:n})}}]),t}(n.Component),ne="/customers";function re(){return ce.apply(this,arguments)}function ce(){return(ce=Object(g.a)(b.a.mark(function e(){var t,a;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.get(ne);case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function se(e){return oe.apply(this,arguments)}function oe(){return(oe=Object(g.a)(b.a.mark(function e(t){var a;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._id){e.next=6;break}return a=Object(d.a)({},t),delete t._id,e.next=5,j.put(ne+"/"+t._id,a);case 5:return e.abrupt("return",e.sent);case 6:return e.next=8,j.post(ne,t);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}var le=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).state={customers:[],pageSize:4,currentPage:1,sortColumn:{path:"name",order:"asc"},search:""},a.handleSort=function(e){a.setState({sortColumn:e})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(b.a.mark(function e(){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,re();case 3:e.t1=e.sent,e.t2={customers:e.t1},e.t0.setState.call(e.t0,e.t2);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Customers"),B.isAdmin()&&r.a.createElement(z.b,{to:"/customers/new",className:"btn btn-primary"},"New Customer"),r.a.createElement(ae,{customers:this.state.customers,sortColumn:this.state.sortColumn,onSort:this.handleSort}))}}]),t}(n.Component),ue=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("h1",null,"Rentals")}}]),t}(n.Component),ie=function(){return r.a.createElement("h1",null,"Not Found")},me=a(23),pe=a(22),he=function(e){var t=e.name,a=e.label,n=e.error,c=Object(pe.a)(e,["name","label","error"]);return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:t},a),r.a.createElement("input",Object.assign({},c,{name:t,id:t,className:"form-control"})),n&&r.a.createElement("div",{className:"alert alert-danger"},n))},de=a(10),ve=a.n(de),fe=function(e){var t=e.name,a=e.label,n=e.error,c=e.options,s=e.selected,o=Object(pe.a)(e,["name","label","error","options","selected"]);return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:t},a),r.a.createElement("select",Object.assign({},o,{name:t,id:t,className:"form-control"}),r.a.createElement("option",{value:""}),c.map(function(e){return r.a.createElement("option",{key:e._id,value:e.name,selected:e.name===s?"selected":null},e.name)})),n&&r.a.createElement("div",{className:"alert alert-danger"},n))},be=function(e){var t=e.name,a=e.label,n=e.onClick;return r.a.createElement("div",{className:"form-group form-check"},r.a.createElement("input",{type:"checkbox",className:"form-check-input",id:t,name:t,onClick:n}),r.a.createElement("label",{className:"form-check-label",htmlFor:t},a))},ge=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={data:{},errors:{}},a.validate=function(){var e=a.state.data,t=ve.a.validate(e,a.schema,{abortEarly:!1}).error;if(!t)return null;var n={};return t.details.map(function(e){return n[e.path[0]]=e.message}),n},a.validateProperty=function(e){var t=e.name,n=e.value,r=Object(me.a)({},t,n),c=Object(me.a)({},t,a.schema[t]),s=ve.a.validate(r,c).error;return s?s.details[0].message:null},a.handleSubmit=function(e){e.preventDefault();var t=a.validate();a.setState({errors:t||{}}),t||a.doSubmit()},a.handleChange=function(e){var t=e.currentTarget,n=Object(d.a)({},a.state.errors),r=a.validateProperty(t);r?n[t.name]=r:delete n[t.name];var c=Object(d.a)({},a.state.data);c[t.name]=t.value,a.setState({data:c,errors:n})},a.handleClick=function(e){var t=e.currentTarget,n=Object(d.a)({},a.state.data);n[t.name]=t.checked,a.setState({data:n})},a.renderCheckbox=function(e,t){return r.a.createElement(be,{name:e,label:t,onClick:a.handleClick})},a.renderButton=function(e){return r.a.createElement("button",{disabled:a.validate(),className:"btn btn-primary"},e)},a.renderInput=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",c=a.state,s=c.data,o=c.errors;return r.a.createElement(he,{type:n,name:e,value:s[e],label:t,onChange:a.handleChange,error:o[e]})},a.renderSelect=function(e,t,n){var c=a.state,s=c.data,o=c.errors;return r.a.createElement(fe,{onChange:a.handleChange,name:e,options:n,error:o[e],label:t,selected:s.genre})},a}return Object(m.a)(t,e),t}(n.Component),Ee=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).state={data:{title:"",genre:"",numberInStock:0,rate:0},errors:{},genres:[]},a.schema={_id:ve.a.string(),title:ve.a.string().required().label("Title"),genre:ve.a.string().label("Genres").required(),numberInStock:ve.a.number().required().integer().min(0).label("Number in stock"),rate:ve.a.number().integer().required().min(0).label("Daily rental rate")},a.mapToDto=function(e){var t=a.state.genres.find(function(t){return t.name===e.genre})._id;return{_id:e._id,title:e.title,numberInStock:e.numberInStock,dailyRentalRate:e.rate,genreId:t}},a.doSubmit=Object(g.a)(b.a.mark(function e(){var t,n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(d.a)({},a.state.data),n=a.mapToDto(t),e.next=4,I(n);case 4:a.props.history.push("/movies");case 5:case"end":return e.stop()}},e)})),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(b.a.mark(function e(){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.populateGenres();case 2:return e.next=4,this.populateMovie();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"populateMovie",value:function(){var e=Object(g.a)(b.a.mark(function e(){var t,a,n,r,c;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.match,n=t.history,r=Object(d.a)({},this.state.data),"/movies/new"===a.path){e.next=18;break}return e.prev=3,e.next=6,S(a.params.id);case 6:c=e.sent,r._id=c._id,r.title=c.title,r.numberInStock=c.numberInStock,r.genre=c.genre.name,r.rate=c.dailyRentalRate,this.setState({data:r}),e.next=18;break;case 15:return e.prev=15,e.t0=e.catch(3),e.abrupt("return",n.replace("/not-found"));case 18:case"end":return e.stop()}},e,this,[[3,15]])}));return function(){return e.apply(this,arguments)}}()},{key:"populateGenres",value:function(){var e=Object(g.a)(b.a.mark(function e(){var t;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:t=e.sent,this.setState({genres:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.genres;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col col-sm-6 col-centered"},r.a.createElement("h3",null,"Movie Form"),r.a.createElement("hr",null),r.a.createElement("form",{onSubmit:this.handleSubmit},this.renderInput("title","Title"),this.renderSelect("genre","Genre",e),this.renderInput("numberInStock","Number In Stock","number"),this.renderInput("rate","Rate","number"),this.renderButton("Save"))))}}]),t}(ge),Oe=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).state={data:{username:"",password:""},errors:{}},a.schema={username:ve.a.string().required().label("Username"),password:ve.a.string().required().label("Password")},a.doSubmit=Object(g.a)(b.a.mark(function e(){var t,n,r,c,s;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=a.state.data,n=t.username,r=t.password,e.next=4,B.login(n,r);case 4:c=a.props.location.state,window.location=c?c.from.pathname:"/",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0.response&&400===e.t0.status&&((s=Object(d.a)({},a.state.errors)).username=e.t0.response,a.setState({errors:s}));case 11:case"end":return e.stop()}},e,null,[[0,8]])})),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return B.getCurrentUser()?r.a.createElement(p.a,{to:"/"}):r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col col-sm-6 col-centered"},r.a.createElement("h3",null,"Login"),r.a.createElement("hr",null),r.a.createElement("form",{onSubmit:this.handleSubmit},this.renderInput("username","Username"),this.renderInput("password","Password","password"),this.renderButton("Login"))))}}]),t}(ge),je=a(46).a+"/users";var ke=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).state={data:{username:"",password:"",name:""},errors:{}},a.schema={username:ve.a.string().email().label("Username").required(),password:ve.a.string().min(5).label("Password").required(),name:ve.a.string().min(5).label("Name").required()},a.doSubmit=Object(g.a)(b.a.mark(function e(){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t=a.state.data,void j.post(je,{email:t.username,password:t.password,name:t.name});case 3:a.props.history.push("/login"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0.response);case 9:case"end":return e.stop()}var t},e,null,[[0,6]])})),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col col-sm-6 col-centered"},r.a.createElement("h3",null,"Register"),r.a.createElement("hr",null),r.a.createElement("form",{onSubmit:this.handleSubmit},this.renderInput("username","Username"),this.renderInput("password","Password","password"),this.renderInput("name","Name"),this.renderButton("Register"))))}}]),t}(ge),ye=function(e){var t=e.component,a=e.render,n=Object(pe.a)(e,["component","render"]);return r.a.createElement(p.b,Object.assign({},n,{render:function(e){return B.getCurrentUser()?t?r.a.createElement(t,e):a(e):r.a.createElement(p.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},we=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){F(),window.location="/"}},{key:"render",value:function(){return null}}]),t}(n.Component),Se=(a(95),a(96),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).state={data:{name:"",phone:"",isGold:!1},errors:{},genres:[]},a.schema={name:ve.a.string().min(3).max(30).required().label("Name"),phone:ve.a.number().required().label("Phone Number"),isGold:ve.a.boolean()},a.doSubmit=Object(g.a)(b.a.mark(function e(){var t,n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Object(d.a)({},a.state.data),e.next=4,se(t);case 4:a.props.history.push("/customers"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0.response&&400===e.t0.status&&((n=Object(d.a)({},a.state.errors)).name=e.t0.response,a.setState({errors:n}));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col col-sm-6 col-centered"},r.a.createElement("h3",null,"Customer Form"),r.a.createElement("hr",null),r.a.createElement("form",{onSubmit:this.handleSubmit},this.renderInput("name","Name"),this.renderInput("phone","Phone Number"),this.renderCheckbox("isGold","Gold Membership?"),this.renderButton("Save"))))}}]),t}(ge)),Ce=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=T();this.setState({user:e})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.ToastContainer,null),r.a.createElement(ee,{user:this.state.user}),r.a.createElement("main",{className:"container"},r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/login",component:Oe}),r.a.createElement(p.b,{path:"/logout",component:we}),r.a.createElement(ye,{path:"/movies/new",component:Ee}),r.a.createElement(ye,{path:"/movies/:id",component:Ee}),r.a.createElement(p.b,{path:"/movies",render:function(t){return r.a.createElement(Z,Object.assign({},t,{user:e.state.user}))}}),r.a.createElement(ye,{path:"/customers/new",component:Se}),r.a.createElement(p.b,{path:"/customers",component:le}),r.a.createElement(p.b,{path:"/rentals",component:ue}),r.a.createElement(p.b,{path:"/not-found",component:ie}),r.a.createElement(p.b,{path:"/register",component:ke}),r.a.createElement(p.a,{from:"/",exact:!0,to:"/movies"}),r.a.createElement(p.a,{to:"/not-found"}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(97),a(98);s.a.render(r.a.createElement(z.a,null,r.a.createElement(Ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[48,1,2]]]);
//# sourceMappingURL=main.dd0fa929.chunk.js.map